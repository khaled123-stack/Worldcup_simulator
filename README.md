# World Cup Simulator (with OS-style Concurrency)

This repo is a toy World Cup simulator that models a full tournament, logs everything into SQLite, and then generates rich visualizations.

Under the hood it’s structured like a tiny “operating system”:

- Each match runs in its **own thread**
- A shared **SQLite database** acts like “disk”
- Queues, locks, and semaphores coordinate **concurrent access**
- Extra simulations model **stadium operations** (bathrooms, cafeteria orders, spectator flows)

---

## Repository Structure

- `combined_worldcup.py`  
  Main entry point. Creates the SQLite database, sets up the tournament, and runs a full World Cup simulation with:
  - Group stage + knockout bracket
  - Multi-threaded `Match` engine (one thread per match)
  - Real-time bracket / scoreboard using Matplotlib
  - Logging of all events (goals, shots, cards, etc.) and stadium operations into `worldcup.db`

- `extract_data.py`  
  One-off helper script to build the static data file:
  - Contains large dictionaries of **team rankings** and **starting lineups**
  - Writes them out to `team_data.json` for the simulator to consume  
  (You normally don’t need to run this unless you want to regenerate or edit the base data.)

- `team_data.json`  
  Static data file with:
  - `starting_lineups`: players per national team  
  - `team_rankings`: simple rating numbers that drive match probabilities

- `worldcup.db`  
  SQLite database generated by the simulator. Contains:
  - `teams` – team names and rankings
  - `matches` – all fixtures, timestamps, stadiums, scores, stage (group/knockout)
  - `match_events` – in-match events (goals, cards, shots, etc.)
  - `spectator_entries` – synthetic spectator arrivals per match
  - `bathroom_usage` – queues, wait times, and durations for bathrooms
  - `orders` – cafeteria/food orders, items, and processing times  


- `visualize_data.py`  
  Post-processing and visualization script. Connects to `worldcup.db` and generates plots such as:
  - Goals by team
  - Ranking vs. actual performance
  - Match timelines
  - Top scorers and goalkeeper “podium”
  - Team play-style heatmaps (event type distributions)
  - Bathroom usage and queue stats
  - Cafeteria order sunburst charts  
  Outputs are saved as PNGs (and some Plotly figures) in the project directory.

---
